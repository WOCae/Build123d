平歯車 生成の試行履歴
✅ 成功したこと

code_utils.py の exec() 名前空間を globals==locals に統一（math スコープ問題解決）
インボリュート点列の計算自体は正しく動作している


❌ 失敗した方法と原因
#方法エラー・問題1Polygon([Vector(x,y)...])build123dのPolygonは正多角形専用。点列を渡すとギザギザになる2Face.make_from_wires(wire)Faceにmake_from_wiresメソッドは存在しない (AttributeError)3BuildLine(外) → make_face(ln.line)BuildLineをBuildSketchの外に置くとmake_faceに渡らず空のSTEP(2kb)になる4BuildSketch内にBuildLineをネスト → make_face()TopoDS::Face Standard_TypeMismatch — 複雑な輪郭ではフェイス生成失敗5歯底円+各歯をAddする方式（扇形輪郭）同じ TopoDS::Face エラー — 各歯の扇形でもmake_faceが失敗

根本的な問題
build123dで任意の複雑な点列からフェイスを作る確実な方法が不明です。make_face() は非平面・自己交差・開いたワイヤーで必ず失敗します。

今後試せる可能性のある方向性
A. extrude に Face を直接渡す
pythonfrom OCC.Core.BRepBuilderAPI import BRepBuilderAPI_MakePolygon
OCCの低レベルAPIを直接使う（build123dを迂回）
B. revolve ではなく歯1本を Box + fillet で近似
インボリュート曲線をあきらめ、台形歯形で妥協する
C. ユーザーの環境で実際に動くコードを先にテスト
まず最小限のコード（3点の三角形 → make_face → extrude）が動くか確認してもらい、動作するAPIを特定する

どの方向で進めますか？ またはCの確認コードをお試しいただけますか？お選びいただけましたか？どれを選んでも対応できます。
ちなみに C（環境テスト） をお勧めする理由は、以下の最小コードをGUIの「📋 Manual」タブに貼り付けて実行するだけで、ご利用の build123d バージョンで make_face が動くかどうかを1分で確認できるためです：
pythonfrom build123d import *
import os
os.makedirs('output', exist_ok=True)

# 単純な三角形でmake_faceが動くかテスト
pts = [(10, 0), (5, 8), (-5, 8), (-10, 0), (-5, -8), (5, -8)]

with BuildPart() as test:
    with BuildSketch(Plane.XY) as sk:
        with BuildLine() as ln:
            Polyline([Vector(x, y, 0) for x, y in pts], close=True)
        make_face()
    extrude(amount=5)

export_stl(test.part, 'output/test.stl')
print('✅ 成功')
このテスト結果によって最適な方針が決まります。